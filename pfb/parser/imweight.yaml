inputs:
  ms:
    dtype: MS
    required: true
    info: 'Path to measurement set.'
    metavar: MS
    abbreviation: ms
  weight_column:
    dtype: str
    abbreviation: wc
    info: 'Column containing natural weights. Must be the same across MSs'
    metavar: COLUMN
  imaging_weight_column:
    dtype: str
    abbreviation: iwc
    info: 'Column containing imaging weights. Must be the same across MSs'
    metavar: COLUMN
  flag_column:
    dtype: str
    default: FLAG
    abbreviation: fc
    info: 'Column containing data flags. Must be the same across MSs'
    metavar: COLUMN
  precision:
    dtype: str
    default: double
    info: '"single" or "double"'
  output_filename:
    dtype: str
    required: true
    info: 'Basename of output'
    metavar: BASENAME
    abbreviation: o
  nband:
    dtype: int
    required: true
    abbreviation: nb
    info: 'Number of imaging bands'
  field_of_view:
    dtype: float
    abbreviation: fov
    info: 'Field of view in degrees'
    metavar: DEG
  super_resolution_factor:
    dtype: float
    abbreviation: srf
    info: 'Will over-sample Nyquist by this factor at max frequency'
  psf_oversize:
    dtype: float
    default: 2.0
    abbreviation: psfo
    info: 'Size of PSF relative to dirty image'
  cell_size:
    dtype: float
    info: 'Cell size in arc-seconds'
  nx:
    dtype: int
    info: 'Number of x pixels'
  ny:
    dtype: int
    info: 'Number of y pixels'
  _include:
    - (pfb.parser)gridding.yml
    - (pfb.parser)dist.yml

outputs:
  log:
    dtype: File
    implicit: '{current.output_filename}_{current.product}.log'
  mds:
    dtype: Dir
    implicit: '{current.output_filename}_{current.product}.mds.zarr'
  xds:
    dtype: Dir
    implicit: '{current.output_filename}_{current.product}.xds.zarr'
  dirty_mfs:
    dtype: File
    implicit: '{current.output_filename}_{current.product}_dirty_mfs.fits'
    must_exist: false
  psf_mfs:
    dtype: File
    implicit: '{current.output_filename}_{current.product}_psf_mfs.fits'
    must_exist: false
  dirty_cube:
    dtype: File
    implicit: '{current.output_filename}_{current.product}_dirty.fits'
    must_exist: false
  psf_cube:
    dtype: File
    implicit: '{current.output_filename}_{current.product}_psf.fits'
    must_exist: false
